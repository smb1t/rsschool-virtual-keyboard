(()=>{"use strict";const e={en:JSON.parse('[{"Backquote":["`","~"],"Digit1":["1","!"],"Digit2":["2","@"],"Digit3":["3","#"],"Digit4":["4","$"],"Digit5":["5","%"],"Digit6":["6","^"],"Digit7":["7","&"],"Digit8":["8","*"],"Digit9":["9","("],"Digit0":["0",")"],"NumpadSubtract":["-","_"],"Equal":["=","+"],"Backspace":["Backspace","Backspace"]},{"Tab":["Tab","Tab"],"KeyQ":["q","Q"],"KeyW":["w","W"],"KeyE":["e","E"],"KeyR":["r","R"],"KeyT":["t","T"],"KeyY":["y","Y"],"KeyU":["u","U"],"KeyI":["i","I"],"KeyO":["o","O"],"KeyP":["p","P"],"BracketLeft":["[","{"],"BracketRight":["]","}"],"Backslash":["\\\\","|"],"Delete":["Delete","Delete"]},{"CapsLock":["Caps Lock","Caps Lock"],"KeyA":["a","A"],"KeyS":["s","S"],"KeyD":["d","D"],"KeyF":["f","F"],"KeyG":["g","G"],"KeyH":["h","H"],"KeyJ":["j","J"],"KeyK":["k","K"],"KeyL":["l","L"],"Semicolon":[";",":"],"Quote":["\'","\\""],"Enter":["Enter","Enter"]},{"ShiftLeft":["Shift","Shift"],"KeyZ":["z","Z"],"KeyX":["x","X"],"KeyC":["c","C"],"KeyV":["v","V"],"KeyB":["b","B"],"KeyN":["n","N"],"KeyM":["m","M"],"Comma":[",","<"],"Period":[".",">"],"Slash":["/","?"],"ArrowUp":["▲","▲"],"ShiftRight":["Shift","Shift"]},{"ControlLeft":["Ctrl","Ctrl"],"MetaLeft":["Win","Win"],"AltLeft":["Alt","Alt"],"Space":[" "," "],"AltRight":["Alt","Alt"],"ArrowLeft":["◄","◄"],"ArrowDown":["▼","▼"],"ArrowRight":["►","►"],"ControlRight":["Ctrl","Ctrl"]}]'),ru:JSON.parse('[{"Backquote":["ё","Ё"],"Digit1":["1","!"],"Digit2":["2","\\""],"Digit3":["3","№"],"Digit4":["4",";"],"Digit5":["5","%"],"Digit6":["6",":"],"Digit7":["7","?"],"Digit8":["8","*"],"Digit9":["9","("],"Digit0":["0",")"],"NumpadSubtract":["-","_"],"Equal":["=","+"],"Backspace":["Backspace","Backspace"]},{"Tab":["Tab","Tab"],"KeyQ":["й","Й"],"KeyW":["ц","Ц"],"KeyE":["у","У"],"KeyR":["к","К"],"KeyT":["е","Е"],"KeyY":["н","Н"],"KeyU":["г","Г"],"KeyI":["ш","Ш"],"KeyO":["щ","Щ"],"KeyP":["з","З"],"BracketLeft":["х","Х"],"BracketRight":["ъ","Ъ"],"Backslash":["\\\\","/"],"Delete":["Delete","Delete"]},{"CapsLock":["Caps Lock","Caps Lock"],"KeyA":["ф","Ф"],"KeyS":["ы","Ы"],"KeyD":["в","В"],"KeyF":["а","А"],"KeyG":["п","П"],"KeyH":["р","Р"],"KeyJ":["о","О"],"KeyK":["л","Л"],"KeyL":["д","Д"],"Semicolon":["ж","Ж"],"Quote":["э","Э"],"Enter":["Enter","Enter"]},{"ShiftLeft":["Shift","Shift"],"KeyZ":["я","Я"],"KeyX":["ч","Ч"],"KeyC":["с","С"],"KeyV":["м","М"],"KeyB":["и","И"],"KeyN":["т","Т"],"KeyM":["ь","Ь"],"Comma":["б","Б"],"Period":["ю","Ю"],"Slash":[".",","],"ArrowUp":["▲","▲"],"ShiftRight":["Shift","Shift"]},{"ControlLeft":["Ctrl","Ctrl"],"MetaLeft":["Win","Win"],"AltLeft":["Alt","Alt"],"Space":[" "," "],"AltRight":["Alt","Alt"],"ArrowLeft":["◄","◄"],"ArrowDown":["▼","▼"],"ArrowRight":["►","►"],"ControlRight":["Ctrl","Ctrl"]}]')};class t{constructor(){localStorage.getItem("lang")||localStorage.setItem("lang","en"),this.lang=localStorage.getItem("lang"),this.rows=5,this.kboardInner=null,this.keyClasses=["lowwercase","uppercase","capson","shiftcaps"],this.keySpecClasses={Backspace:"key--backspace",Tab:"key--tab",CapsLock:"key--caps-lock",Enter:"key--enter",ShiftLeft:"key--shift-left",ShiftRight:"key--shift-right",Space:"key--space",AltLeft:"key--alt-left",AltRight:"key--alt-right"},this.CapsLock=!1,this.Shift=!1,this.letters=["Backquote","BracketLeft","BracketRight","Semicolon","Quote","Comma","Period"],this.excludeKeys=["Delete","ArrowUp","ArrowLeft","ArrowRight","ArrowDown","ControlRight","ControlLeft","AltRight","AltLeft","MetaLeft"]}init(){this.createBoard(),this.keyEventsHandler(),this.mouseEventHandler()}createElement(e){const t=document.createElement(e.element),s=Object.keys(e.attributes),i=Object.values(e.attributes);for(let e=0;e<s.length;e+=1)t.setAttribute(s[e],i[e]);return e.parent.appendChild(t),t}createBoard(){const e=this.createElement({parent:document.body,element:"div",attributes:{class:"keyboard-container"}});this.createElement({parent:e,element:"h1",attributes:{class:"title"}}).innerText="RSS Virtual Keyboard",this.inputArea=this.createElement({parent:e,element:"textarea",attributes:{name:"input-area",class:"input-area",colls:"30",rows:"5"}}),this.kboard=this.createElement({parent:e,element:"div",attributes:{class:"keyboard"}}),this.kboardInner=this.createElement({parent:this.kboard,element:"div",attributes:{class:"keyboard__inner"}}),this.fillBoard(),["Клавиатура создана в операционной системе Windows.","Для переключения языка используется комбинация: <span>Ctrl</span> + <span>Shift</span>. Клавиши <span>Shift</span> при клике мышкой работает как <span>Caps Lock</span>."].forEach((t=>{this.createElement({parent:e,element:"p",attributes:{class:"description"}}).innerHTML=t}))}fillBoard(){for(let t=0;t<this.rows;t+=1){const s=this.createElement({parent:this.kboardInner,element:"div",attributes:{class:"row"}}),i=Object.keys(e[this.lang][t]);for(let e=0;e<i.length;e+=1)this.createKey(i[e],t,s)}}createKey(t,s,i){const a=this.createElement({parent:i,element:"div",attributes:{class:"key","data-name":t}});let n="";t in this.keySpecClasses&&a.classList.add(this.keySpecClasses[t]);const r=Object.keys(e);for(let i=0;i<r.length;i+=1){const l=this.createElement({parent:a,element:"span",attributes:{"data-lang":r[i]}}),c=e[r[i]][s][t];this.lang!==r[i]?l.classList.add("hidden"):n=c[[0]];for(let e=0;e<4;e+=1){const s=this.createElement({parent:l,element:"span",attributes:{class:`${this.keyClasses[e]} hidden`}});this.CapsLock||0!==e||s.classList.remove("hidden"),this.CapsLock&&2===e&&s.classList.remove("hidden");let i=e;const a=t.indexOf("Key")>=0||this.letters.includes(t);2===e&&(i=a?e-1:0),3===e&&(i=a?i=e-3:1),s.innerText=c[i]}}a.setAttribute("data-value",n)}keyEventsHandler(){const e=document.querySelectorAll(".key");document.addEventListener("keydown",(t=>{this.inputArea.focus();const s=document.querySelector(`[data-name=${t.code}]`);s.classList.add("is-pressed"),t.shiftKey&&t.ctrlKey&&this.changeLang(e),"CapsLock"===t.code&&(this.CapsLock=!this.CapsLock,s.classList.toggle("is-active"),this.capsLockHandler(e)),t.shiftKey&&(this.Shift=!0,this.shiftHandler(e))})),document.addEventListener("keyup",(t=>{for(let s=0;s<e.length;s+=1)document.querySelector(`[data-name=${t.code}]`).classList.remove("is-pressed");"ShiftLeft"!==t.code&&"ShiftRight"!==t.code||(this.Shift=!1,this.shiftHandler(e))}))}shiftHandler(e){for(let t=0;t<e.length;t+=1){const s=e[t].querySelector(`[data-lang="${this.lang}"]`),i=s.querySelector(".lowwercase"),a=s.querySelector(".uppercase"),n=s.querySelector(".capson"),r=s.querySelector(".shiftcaps");let l="";this.Shift&&(this.CapsLock?(n.classList.add("hidden"),r.classList.remove("hidden"),l=r.innerText):(i.classList.add("hidden"),a.classList.remove("hidden"),l=a.innerText)),this.Shift||(this.CapsLock?(n.classList.remove("hidden"),r.classList.add("hidden"),l=n.innerText):(i.classList.remove("hidden"),a.classList.add("hidden"),l=i.innerText)),e[t].setAttribute("data-value",l)}}capsLockHandler(e){for(let t=0;t<e.length;t+=1){const s=e[t].querySelector(`[data-lang="${this.lang}"]`),i=s.querySelector(".lowwercase"),a=s.querySelector(".uppercase"),n=s.querySelector(".capson"),r=s.querySelector(".shiftcaps");let l="";this.CapsLock&&(this.Shift?(a.classList.add("hidden"),r.classList.remove("hidden"),l=r.innerText):(i.classList.add("hidden"),n.classList.remove("hidden"),l=n.innerText)),this.CapsLock||(this.Shift?(i.classList.remove("hidden"),r.classList.add("hidden")):(i.classList.remove("hidden"),n.classList.add("hidden")),l=i.innerText),e[t].setAttribute("data-value",l)}}changeLang(e){"en"===this.lang?(localStorage.setItem("lang","ru"),this.lang=localStorage.getItem("lang")):(localStorage.setItem("lang","en"),this.lang=localStorage.getItem("lang"));for(let t=0;t<e.length;t+=1){const s=e[t].children;for(let e=0;e<s.length;e+=1)if(s[e].classList.toggle("hidden"),s[e].getAttribute("data-name")!==this.lang){const t=s[e].querySelectorAll("span");for(let e=0;e<t.length;e+=1)t[e].classList.contains("hidden")||t[e].classList.add("hidden")}}}insertValue(e,t){const[s,i]=[t.selectionStart,t.selectionEnd];t.setRangeText(e,s,i,"end")}mouseEventHandler(){this.kboard.addEventListener("click",(e=>{e.preventDefault(),e.stopImmediatePropagation();const t=this.kboard.querySelectorAll(".key");if(!e.target.classList.contains("key")&&!e.target.closest("div.key"))return;const s=e.target.classList.contains("key")?e.target:e.target.closest("div.key"),i=s.getAttribute("data-name");if(null===i)return;this.inputArea.focus();const a=Object.keys(this.keySpecClasses).concat(this.excludeKeys).filter((e=>"Space"!==e)),n=this.inputArea.selectionStart,r=this.inputArea.selectionEnd;a.includes(i)||this.insertValue(s.getAttribute("data-value"),this.inputArea),"ArrowLeft"===i&&(this.inputArea.selectionEnd=r-1,this.inputArea.selectionStart=n-1),"ArrowRight"===i&&(this.inputArea.selectionEnd=n+1,this.inputArea.selectionStart=n+1),"ShiftLeft"!==i&&"ShiftRight"!==i||(s.classList.toggle("is-active"),"ShiftLeft"===i&&t[54].classList.toggle("is-active"),"ShiftRight"===i&&t[42].classList.toggle("is-active"),this.Shift?(this.Shift=!1,this.shiftHandler(t)):(this.Shift=!0,this.shiftHandler(t))),"CapsLock"===i&&(this.CapsLock?(this.CapsLock=!1,s.classList.toggle("is-active"),this.capsLockHandler(t)):(this.CapsLock=!0,s.classList.toggle("is-active"),this.capsLockHandler(t)))}))}}document.addEventListener("DOMContentLoaded",(()=>{(new t).init()}))})();
//# sourceMappingURL=scripts.89d2465159918cf9c969.js.map